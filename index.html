<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>نظام استهلاك الوقود - السعودية</title>
<style>
body { font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background:#f4f4f4; }
header { background:#fff; color:#004aad; padding:20px; text-align:center; box-shadow:0 2px 8px rgba(0,0,0,0.2);}
header img { height:120px; margin-bottom:10px; }
.container { max-width:1200px; margin:20px auto; padding:20px; background:white; border-radius:10px; box-shadow:0 0 15px rgba(0,0,0,0.2); }
label { display:block; margin-top:15px; font-weight:bold; }
select, input[type=number], button { width:100%; padding:10px; margin-top:5px; border-radius:5px; border:1px solid #ccc; font-size:16px; }
button { background:#004aad; color:white; font-size:18px; cursor:pointer; margin-top:20px; }
button:hover { background:#00308f; }
#map { height:500px; width:100%; margin-top:20px; border-radius:10px; }
.result { margin-top:20px; font-size:18px; font-weight:bold; color:#333; }
</style>
</head>
<body>

<header>
    <img src="https://i.ibb.co/SwgRSYjK/logo.png" alt="شعار النظام">
    <h1>نظام استهلاك الوقود - المملكة العربية السعودية</h1>
</header>

<div class="container">
    <label for="from">من:</label>
    <select id="from"></select>

    <label for="to">إلى:</label>
    <select id="to"></select>

    <label for="vehicle">نوع المركبة:</label>
    <select id="vehicle">
        <option value="">اختر نوع المركبة</option>
        <option value="خصوصي">خصوصي</option>
        <option value="فان">فان</option>
        <option value="حافلة">حافلة</option>
    </select>

    <label for="fuel">نوع الوقود:</label>
    <select id="fuel">
        <option value="">اختر نوع الوقود</option>
        <option value="91">91</option>
        <option value="95">95</option>
        <option value="ديزل">ديزل</option>
    </select>

    <button onclick="calculateFuel()">احسب استهلاك الوقود</button>

    <div class="result" id="result"></div>
    <div id="map"></div>
</div>

<script>
const locations = [
    "الرياض","جدة","مكة المكرمة","الدمام","المدينة المنورة",
    "الطائف","بريدة","خميس مشيط","حائل","تبوك","جيزان","نجران",
    "عرعر","سكاكا","ينبع"
];

const approximateDistances = {
    "الرياض-جدة": 950,
    "الرياض-مكة المكرمة": 870,
    "الرياض-الدمام": 420,
    "جدة-مكة المكرمة": 80,
    "جدة-الدمام": 1000,
    "مكة المكرمة-الدمام": 980
    // يمكن إضافة باقي المدن لكل زوج
};

const fromSelect = document.getElementById('from');
const toSelect = document.getElementById('to');

locations.forEach(loc => {
    const optionFrom = document.createElement('option');
    optionFrom.value = loc;
    optionFrom.textContent = loc;
    fromSelect.appendChild(optionFrom);

    const optionTo = document.createElement('option');
    optionTo.value = loc;
    optionTo.textContent = loc;
    toSelect.appendChild(optionTo);
});

let map, directionsService, directionsRenderer;

function initMap() {
    map = new google.maps.Map(document.getElementById("map"), {center: { lat: 24.7136, lng: 46.6753 }, zoom: 5});
    directionsService = new google.maps.DirectionsService();
    directionsRenderer = new google.maps.DirectionsRenderer({ suppressMarkers: false });
    directionsRenderer.setMap(map);
}

function calculateFuel() {
    const from = document.getElementById('from').value;
    const to = document.getElementById('to').value;
    const vehicle = document.getElementById('vehicle').value;
    const fuel = document.getElementById('fuel').value;

    if (!from || !to || !vehicle || !fuel) { alert("الرجاء اختيار جميع الحقول!"); return; }

    const consumptionRate = { "خصوصي": 0.12, "فان": 0.18, "حافلة": 0.25 };

    if (typeof google !== 'undefined' && google.maps) {
        directionsService.route({
            origin: from + ", المملكة العربية السعودية",
            destination: to + ", المملكة العربية السعودية",
            travelMode: google.maps.TravelMode.DRIVING
        }, function(result, status) {
            if (status === 'OK') {
                directionsRenderer.setDirections(result);
                const distanceKm = result.routes[0].legs[0].distance.value / 1000;
                const fuelUsed = distanceKm * consumptionRate[vehicle];
                document.getElementById('result').innerHTML =
                    `المسافة: ${distanceKm.toFixed(2)} كم<br>نوع المركبة: ${vehicle}<br>نوع الوقود: ${fuel}<br>استهلاك الوقود: ${fuelUsed.toFixed(2)} لتر`;
            } else {
                fallbackFuelCalculation(from, to, vehicle, fuel);
            }
        });
    } else {
        fallbackFuelCalculation(from, to, vehicle, fuel);
    }
}

function fallbackFuelCalculation(from, to, vehicle, fuel) {
    const key = `${from}-${to}`;
    let distanceKm = approximateDistances[key] || approximateDistances[`${to}-${from}`] || 100; // افتراضي 100 كم إذا غير موجود
    const consumptionRate = { "خصوصي": 0.12, "فان": 0.18, "حافلة": 0.25 };
    const fuelUsed = distanceKm * consumptionRate[vehicle];
    document.getElementById('result').innerHTML =
        `المسافة التقريبية: ${distanceKm} كم<br>نوع المركبة: ${vehicle}<br>نوع الوقود: ${fuel}<br>استهلاك الوقود: ${fuelUsed.toFixed(2)} لتر (تقديري)`;
}
</script>

<script async
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCWQ2q1HU_LLQKkp2KRlOZ1FdF0bI6jBbM&callback=initMap&language=ar">
</script>

</body>
</html>

